% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/import_instruments.R
\name{import_instruments}
\alias{import_instruments}
\title{Import all instruments into individual R tables}
\usage{
import_instruments(
  url,
  token,
  drop_blank = TRUE,
  record_id = "record_id",
  first_record_id = 1,
  envir = .GlobalEnv,
  return_list = FALSE,
  labels = TRUE,
  filter_instrument = NULL,
  filter_function = NULL
)
}
\arguments{
\item{url}{The API URL for your the instance of REDCap}

\item{token}{The API security token}

\item{drop_blank}{Drop records that have no data. TRUE by default.}

\item{record_id}{Name of \code{record_id} variable (if it was changed in REDCap).}

\item{first_record_id}{A value of the custom \code{record_id} variable (if
changed in REDCap).  To improve the speed of the import, tidyREDCap pulls
in a single record twice.  By default if uses the first record.  If you
have a custom \code{record_id} variable and if its the first record identifier
is not \code{1},  specify a record identifier value here.  For example if you
are using \code{dude_id} instead of \code{record_id} and \code{dude_id} has a value of
"first dude" for one of its records this argument would be
\code{first_record_id = "first dude"}.}

\item{envir}{The name of the environment where the tables should be saved.}

\item{return_list}{If TRUE, returns instrument data in a named list. If FALSE (default), assigns instrument data to environment.}

\item{labels}{If TRUE (default), applies variable labels to columns. If FALSE, columns will not have labels.}

\item{filter_instrument}{Optional character string specifying which instrument
to use for filtering. If provided with filter_function, this instrument will be
filtered first, and the resulting record IDs will be used to filter all
other instruments.}

\item{filter_function}{Optional function that takes a tbl object and returns
a modified instrument. If \code{filter_instrument} is specified, this filter is
applied only to that instrument, and resulting record IDs filter all others.
If \code{filter_instrument} is NULL (default), filter applies to each instrument separately.
Example: \code{function(x) x |> filter(age >= 18)}}
}
\value{
One table (\code{data.frame}) for each instrument/form in a REDCap project.
If \code{return_list} = TRUE, returns a named list.
}
\description{
This function takes the url and key for a REDCap
project and returns a table for each instrument/form in the project.
}
\examples{
\dontrun{
# Import each instrument to multiple tables
import_instruments(
  "https://bbmc.ouhsc.edu/redcap/api/",
  Sys.getenv("redcap_token")
)

# Import each instrument to a single list
instruments <- import_instruments(
  "https://bbmc.ouhsc.edu/redcap/api/",
  Sys.getenv("redcap_token"),
  return_list = TRUE
)

# Import without labels
instruments <- import_instruments(
  "https://bbmc.ouhsc.edu/redcap/api/",
  Sys.getenv("redcap_token"),
  labels = FALSE
)

# Filter all instruments based on demographics
instruments <- import_instruments(
  "https://bbmc.ouhsc.edu/redcap/api/",
  Sys.getenv("redcap_token"),
  filter_instrument = "demographics",
  filter_function = \(x) x |> dplyr::filter(age >= 18)
)
}
}
